{"ast":null,"code":"/* Copyright (c) 2012-2014 LevelUP contributors\n * See list at <https://github.com/rvagg/node-levelup#contributing>\n * MIT License <https://github.com/rvagg/node-levelup/blob/master/LICENSE.md>\n */\n\n// NOTE: we are fixed to readable-stream@1.0.x for now\n// for pure Streams2 across Node versions\nvar Readable = require('readable-stream').Readable,\n  inherits = require('util').inherits,\n  extend = require('xtend'),\n  EncodingError = require('./errors').EncodingError,\n  util = require('./util'),\n  defaultOptions = {\n    keys: true,\n    values: true\n  },\n  makeKeyValueData = function (key, value) {\n    return {\n      key: util.decodeKey(key, this._options),\n      value: util.decodeValue(value, this._options)\n    };\n  },\n  makeKeyData = function (key) {\n    return util.decodeKey(key, this._options);\n  },\n  makeValueData = function (_, value) {\n    return util.decodeValue(value, this._options);\n  },\n  makeNoData = function () {\n    return null;\n  };\nfunction ReadStream(options, db, iteratorFactory) {\n  if (!(this instanceof ReadStream)) return new ReadStream(options, db, iteratorFactory);\n  Readable.call(this, {\n    objectMode: true,\n    highWaterMark: options.highWaterMark\n  });\n\n  // purely to keep `db` around until we're done so it's not GCed if the user doesn't keep a ref\n  this._db = db;\n  options = this._options = extend(defaultOptions, options);\n  this._keyEncoding = options.keyEncoding || options.encoding;\n  this._valueEncoding = options.valueEncoding || options.encoding;\n  if (typeof this._options.start != 'undefined') this._options.start = util.encodeKey(this._options.start, this._options);\n  if (typeof this._options.end != 'undefined') this._options.end = util.encodeKey(this._options.end, this._options);\n  if (typeof this._options.limit != 'number') this._options.limit = -1;\n  this._options.keyAsBuffer = util.isKeyAsBuffer(this._options);\n  this._options.valueAsBuffer = util.isValueAsBuffer(this._options);\n  this._makeData = this._options.keys && this._options.values ? makeKeyValueData : this._options.keys ? makeKeyData : this._options.values ? makeValueData : makeNoData;\n  var self = this;\n  if (!this._db.isOpen()) {\n    this._db.once('ready', function () {\n      if (!self._destroyed) {\n        self._iterator = iteratorFactory(self._options);\n      }\n    });\n  } else this._iterator = iteratorFactory(this._options);\n}\ninherits(ReadStream, Readable);\nReadStream.prototype._read = function read() {\n  var self = this;\n  if (!self._db.isOpen()) {\n    return self._db.once('ready', function () {\n      read.call(self);\n    });\n  }\n  if (self._destroyed) return;\n  self._iterator.next(function (err, key, value) {\n    if (err || key === undefined && value === undefined) {\n      if (!err && !self._destroyed) self.push(null);\n      return self._cleanup(err);\n    }\n    try {\n      value = self._makeData(key, value);\n    } catch (e) {\n      return self._cleanup(new EncodingError(e));\n    }\n    if (!self._destroyed) self.push(value);\n  });\n};\nReadStream.prototype._cleanup = function (err) {\n  if (this._destroyed) return;\n  this._destroyed = true;\n  var self = this;\n  if (err) self.emit('error', err);\n  if (self._iterator) {\n    self._iterator.end(function () {\n      self._iterator = null;\n      self.emit('close');\n    });\n  } else {\n    self.emit('close');\n  }\n};\nReadStream.prototype.destroy = function () {\n  this._cleanup();\n};\nReadStream.prototype.toString = function () {\n  return 'LevelUP.ReadStream';\n};\nmodule.exports = ReadStream;","map":{"version":3,"names":["Readable","require","inherits","extend","EncodingError","util","defaultOptions","keys","values","makeKeyValueData","key","value","decodeKey","_options","decodeValue","makeKeyData","makeValueData","_","makeNoData","ReadStream","options","db","iteratorFactory","call","objectMode","highWaterMark","_db","_keyEncoding","keyEncoding","encoding","_valueEncoding","valueEncoding","start","encodeKey","end","limit","keyAsBuffer","isKeyAsBuffer","valueAsBuffer","isValueAsBuffer","_makeData","self","isOpen","once","_destroyed","_iterator","prototype","_read","read","next","err","undefined","push","_cleanup","e","emit","destroy","toString","module","exports"],"sources":["C:/Users/Moran/Documents/react-projects/react-demo/node_modules/levelup/lib/read-stream.js"],"sourcesContent":["/* Copyright (c) 2012-2014 LevelUP contributors\n * See list at <https://github.com/rvagg/node-levelup#contributing>\n * MIT License <https://github.com/rvagg/node-levelup/blob/master/LICENSE.md>\n */\n\n// NOTE: we are fixed to readable-stream@1.0.x for now\n// for pure Streams2 across Node versions\nvar Readable      = require('readable-stream').Readable\n  , inherits      = require('util').inherits\n  , extend        = require('xtend')\n  , EncodingError = require('./errors').EncodingError\n  , util          = require('./util')\n\n  , defaultOptions = { keys: true, values: true }\n\n  , makeKeyValueData = function (key, value) {\n      return {\n          key: util.decodeKey(key, this._options)\n        , value: util.decodeValue(value, this._options)\n      }\n    }\n  , makeKeyData = function (key) {\n      return util.decodeKey(key, this._options)\n    }\n  , makeValueData = function (_, value) {\n      return util.decodeValue(value, this._options)\n    }\n  , makeNoData = function () { return null }\n\nfunction ReadStream (options, db, iteratorFactory) {\n  if (!(this instanceof ReadStream))\n    return new ReadStream(options, db, iteratorFactory)\n\n  Readable.call(this, { objectMode: true, highWaterMark: options.highWaterMark })\n\n  // purely to keep `db` around until we're done so it's not GCed if the user doesn't keep a ref\n  this._db = db\n\n  options = this._options = extend(defaultOptions, options)\n\n  this._keyEncoding   = options.keyEncoding   || options.encoding\n  this._valueEncoding = options.valueEncoding || options.encoding\n\n  if (typeof this._options.start != 'undefined')\n    this._options.start = util.encodeKey(this._options.start, this._options)\n  if (typeof this._options.end != 'undefined')\n    this._options.end = util.encodeKey(this._options.end, this._options)\n  if (typeof this._options.limit != 'number')\n    this._options.limit = -1\n\n  this._options.keyAsBuffer   = util.isKeyAsBuffer(this._options)\n\n  this._options.valueAsBuffer = util.isValueAsBuffer(this._options)\n\n  this._makeData = this._options.keys && this._options.values\n    ? makeKeyValueData : this._options.keys\n      ? makeKeyData : this._options.values\n        ? makeValueData : makeNoData\n\n  var self = this\n  if (!this._db.isOpen()) {\n    this._db.once('ready', function () {\n      if (!self._destroyed) {\n        self._iterator = iteratorFactory(self._options)\n      }\n    })\n  } else\n    this._iterator = iteratorFactory(this._options)\n}\n\ninherits(ReadStream, Readable)\n\nReadStream.prototype._read = function read () {\n  var self = this\n  if (!self._db.isOpen()) {\n    return self._db.once('ready', function () { read.call(self) })\n  }\n  if (self._destroyed)\n    return\n \n  self._iterator.next(function(err, key, value) {\n    if (err || (key === undefined && value === undefined)) {\n      if (!err && !self._destroyed)\n        self.push(null)\n      return self._cleanup(err)\n    }\n\n    try {\n      value = self._makeData(key, value)\n    } catch (e) {\n      return self._cleanup(new EncodingError(e))\n    }\n    if (!self._destroyed)\n      self.push(value)\n  })\n}\n\nReadStream.prototype._cleanup = function (err) {\n  if (this._destroyed)\n    return\n\n  this._destroyed = true\n\n  var self = this\n  if (err)\n    self.emit('error', err)\n\n  if (self._iterator) {\n    self._iterator.end(function () {\n      self._iterator = null\n      self.emit('close')\n    })\n  } else {\n    self.emit('close')\n  }\n}\n\nReadStream.prototype.destroy = function () {\n  this._cleanup()\n}\n\nReadStream.prototype.toString = function () {\n  return 'LevelUP.ReadStream'\n}\n\nmodule.exports = ReadStream\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}