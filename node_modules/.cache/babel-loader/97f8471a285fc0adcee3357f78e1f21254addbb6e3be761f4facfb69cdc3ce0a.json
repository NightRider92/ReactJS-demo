{"ast":null,"code":"var events = require('events');\nmodule.exports = function () {\n  var listeners = {};\n  var that = new events.EventEmitter();\n  that.watch = function (key, cb) {\n    if (!listeners[key]) {\n      listeners[key] = new events.EventEmitter();\n      listeners[key].setMaxListeners(0);\n    }\n    if (cb) listeners[key].on('change', cb);\n    return listeners[key];\n  };\n  that.watcher = function (key, cb) {\n    var watcher = new events.EventEmitter();\n    var onchange = function () {\n      watcher.emit('change', 'change', key);\n    };\n    that.watch(key, onchange);\n    if (cb) watcher.on('change', cb);\n    watcher.close = function () {\n      that.unwatch(key, onchange);\n    };\n    return watcher;\n  };\n  that.unwatch = function (key, cb) {\n    if (!listeners[key]) return;\n    if (cb) listeners[key].removeListener('change', cb);else listeners[key].removeAllListeners('change');\n    if (!listeners[key].listeners('change').length) delete listeners[key];\n    ;\n  };\n  that.change = function (key) {\n    if (listeners[key]) listeners[key].emit('change');\n    that.emit('change', key);\n  };\n  that.cb = function (key, cb) {\n    return function (err, val) {\n      if (key) that.change(key);\n      if (cb) cb(err, val);\n    };\n  };\n  return that;\n};","map":{"version":3,"names":["events","require","module","exports","listeners","that","EventEmitter","watch","key","cb","setMaxListeners","on","watcher","onchange","emit","close","unwatch","removeListener","removeAllListeners","length","change","err","val"],"sources":["C:/Users/Moran/Documents/react-projects/react-demo/node_modules/level-filesystem/watchers.js"],"sourcesContent":["var events = require('events');\n\nmodule.exports = function() {\n\tvar listeners = {};\n\tvar that = new events.EventEmitter();\n\n\tthat.watch = function(key, cb) {\n\t\tif (!listeners[key]) {\n\t\t\tlisteners[key] = new events.EventEmitter();\n\t\t\tlisteners[key].setMaxListeners(0);\n\t\t}\n\n\t\tif (cb) listeners[key].on('change', cb);\n\t\treturn listeners[key];\n\t};\n\n\tthat.watcher = function(key, cb) {\n\t\tvar watcher = new events.EventEmitter();\n\t\tvar onchange = function() {\n\t\t\twatcher.emit('change', 'change', key);\n\t\t};\n\n\t\tthat.watch(key, onchange);\n\t\tif (cb) watcher.on('change', cb);\n\t\twatcher.close = function() {\n\t\t\tthat.unwatch(key, onchange);\n\t\t};\n\n\t\treturn watcher;\n\t};\n\n\tthat.unwatch = function(key, cb) {\n\t\tif (!listeners[key]) return;\n\t\tif (cb) listeners[key].removeListener('change', cb);\n\t\telse listeners[key].removeAllListeners('change');\n\t\tif (!listeners[key].listeners('change').length) delete listeners[key];;\n\t};\n\n\tthat.change = function(key) {\n\t\tif (listeners[key]) listeners[key].emit('change');\n\t\tthat.emit('change', key);\n\t};\n\n\tthat.cb = function(key, cb) {\n\t\treturn function(err, val) {\n\t\t\tif (key) that.change(key);\n\t\t\tif (cb) cb(err, val);\n\t\t};\n\t};\n\n\treturn that;\n};"],"mappings":"AAAA,IAAIA,MAAM,GAAGC,OAAO,CAAC,QAAQ,CAAC;AAE9BC,MAAM,CAACC,OAAO,GAAG,YAAW;EAC3B,IAAIC,SAAS,GAAG,CAAC,CAAC;EAClB,IAAIC,IAAI,GAAG,IAAIL,MAAM,CAACM,YAAY,CAAC,CAAC;EAEpCD,IAAI,CAACE,KAAK,GAAG,UAASC,GAAG,EAAEC,EAAE,EAAE;IAC9B,IAAI,CAACL,SAAS,CAACI,GAAG,CAAC,EAAE;MACpBJ,SAAS,CAACI,GAAG,CAAC,GAAG,IAAIR,MAAM,CAACM,YAAY,CAAC,CAAC;MAC1CF,SAAS,CAACI,GAAG,CAAC,CAACE,eAAe,CAAC,CAAC,CAAC;IAClC;IAEA,IAAID,EAAE,EAAEL,SAAS,CAACI,GAAG,CAAC,CAACG,EAAE,CAAC,QAAQ,EAAEF,EAAE,CAAC;IACvC,OAAOL,SAAS,CAACI,GAAG,CAAC;EACtB,CAAC;EAEDH,IAAI,CAACO,OAAO,GAAG,UAASJ,GAAG,EAAEC,EAAE,EAAE;IAChC,IAAIG,OAAO,GAAG,IAAIZ,MAAM,CAACM,YAAY,CAAC,CAAC;IACvC,IAAIO,QAAQ,GAAG,SAAAA,CAAA,EAAW;MACzBD,OAAO,CAACE,IAAI,CAAC,QAAQ,EAAE,QAAQ,EAAEN,GAAG,CAAC;IACtC,CAAC;IAEDH,IAAI,CAACE,KAAK,CAACC,GAAG,EAAEK,QAAQ,CAAC;IACzB,IAAIJ,EAAE,EAAEG,OAAO,CAACD,EAAE,CAAC,QAAQ,EAAEF,EAAE,CAAC;IAChCG,OAAO,CAACG,KAAK,GAAG,YAAW;MAC1BV,IAAI,CAACW,OAAO,CAACR,GAAG,EAAEK,QAAQ,CAAC;IAC5B,CAAC;IAED,OAAOD,OAAO;EACf,CAAC;EAEDP,IAAI,CAACW,OAAO,GAAG,UAASR,GAAG,EAAEC,EAAE,EAAE;IAChC,IAAI,CAACL,SAAS,CAACI,GAAG,CAAC,EAAE;IACrB,IAAIC,EAAE,EAAEL,SAAS,CAACI,GAAG,CAAC,CAACS,cAAc,CAAC,QAAQ,EAAER,EAAE,CAAC,CAAC,KAC/CL,SAAS,CAACI,GAAG,CAAC,CAACU,kBAAkB,CAAC,QAAQ,CAAC;IAChD,IAAI,CAACd,SAAS,CAACI,GAAG,CAAC,CAACJ,SAAS,CAAC,QAAQ,CAAC,CAACe,MAAM,EAAE,OAAOf,SAAS,CAACI,GAAG,CAAC;IAAC;EACvE,CAAC;EAEDH,IAAI,CAACe,MAAM,GAAG,UAASZ,GAAG,EAAE;IAC3B,IAAIJ,SAAS,CAACI,GAAG,CAAC,EAAEJ,SAAS,CAACI,GAAG,CAAC,CAACM,IAAI,CAAC,QAAQ,CAAC;IACjDT,IAAI,CAACS,IAAI,CAAC,QAAQ,EAAEN,GAAG,CAAC;EACzB,CAAC;EAEDH,IAAI,CAACI,EAAE,GAAG,UAASD,GAAG,EAAEC,EAAE,EAAE;IAC3B,OAAO,UAASY,GAAG,EAAEC,GAAG,EAAE;MACzB,IAAId,GAAG,EAAEH,IAAI,CAACe,MAAM,CAACZ,GAAG,CAAC;MACzB,IAAIC,EAAE,EAAEA,EAAE,CAACY,GAAG,EAAEC,GAAG,CAAC;IACrB,CAAC;EACF,CAAC;EAED,OAAOjB,IAAI;AACZ,CAAC"},"metadata":{},"sourceType":"script","externalDependencies":[]}