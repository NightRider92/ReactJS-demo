{"ast":null,"code":"/* Copyright (c) 2012-2014 LevelUP contributors\n * See list at <https://github.com/rvagg/node-levelup#contributing>\n * MIT License\n * <https://github.com/rvagg/node-levelup/blob/master/LICENSE.md>\n */\n\nvar util = require('./util'),\n  WriteError = require('./errors').WriteError,\n  getOptions = util.getOptions,\n  dispatchError = util.dispatchError;\nfunction Batch(levelup) {\n  this._levelup = levelup;\n  this.batch = levelup.db.batch();\n  this.ops = [];\n}\nBatch.prototype.put = function (key_, value_, options) {\n  options = getOptions(this._levelup, options);\n  var key = util.encodeKey(key_, options),\n    value = util.encodeValue(value_, options);\n  try {\n    this.batch.put(key, value);\n  } catch (e) {\n    throw new WriteError(e);\n  }\n  this.ops.push({\n    type: 'put',\n    key: key,\n    value: value\n  });\n  return this;\n};\nBatch.prototype.del = function (key_, options) {\n  options = getOptions(this._levelup, options);\n  var key = util.encodeKey(key_, options);\n  try {\n    this.batch.del(key);\n  } catch (err) {\n    throw new WriteError(err);\n  }\n  this.ops.push({\n    type: 'del',\n    key: key\n  });\n  return this;\n};\nBatch.prototype.clear = function () {\n  try {\n    this.batch.clear();\n  } catch (err) {\n    throw new WriteError(err);\n  }\n  this.ops = [];\n  return this;\n};\nBatch.prototype.write = function (callback) {\n  var levelup = this._levelup,\n    ops = this.ops;\n  try {\n    this.batch.write(function (err) {\n      if (err) return dispatchError(levelup, new WriteError(err), callback);\n      levelup.emit('batch', ops);\n      if (callback) callback();\n    });\n  } catch (err) {\n    throw new WriteError(err);\n  }\n};\nmodule.exports = Batch;","map":{"version":3,"names":["util","require","WriteError","getOptions","dispatchError","Batch","levelup","_levelup","batch","db","ops","prototype","put","key_","value_","options","key","encodeKey","value","encodeValue","e","push","type","del","err","clear","write","callback","emit","module","exports"],"sources":["C:/Users/Moran/Documents/react-projects/react-demo/node_modules/levelup/lib/batch.js"],"sourcesContent":["/* Copyright (c) 2012-2014 LevelUP contributors\n * See list at <https://github.com/rvagg/node-levelup#contributing>\n * MIT License\n * <https://github.com/rvagg/node-levelup/blob/master/LICENSE.md>\n */\n\nvar util          = require('./util')\n  , WriteError    = require('./errors').WriteError\n\n  , getOptions    = util.getOptions\n  , dispatchError = util.dispatchError\n\nfunction Batch (levelup) {\n  this._levelup = levelup\n  this.batch = levelup.db.batch()\n  this.ops = []\n}\n\nBatch.prototype.put = function (key_, value_, options) {\n  options = getOptions(this._levelup, options)\n\n  var key   = util.encodeKey(key_, options)\n    , value = util.encodeValue(value_, options)\n\n  try {\n    this.batch.put(key, value)\n  } catch (e) {\n    throw new WriteError(e)\n  }\n  this.ops.push({ type : 'put', key : key, value : value })\n\n  return this\n}\n\nBatch.prototype.del = function (key_, options) {\n  options = getOptions(this._levelup, options)\n\n  var key = util.encodeKey(key_, options)\n\n  try {\n    this.batch.del(key)\n  } catch (err) {\n    throw new WriteError(err)\n  }\n  this.ops.push({ type : 'del', key : key })\n\n  return this\n}\n\nBatch.prototype.clear = function () {\n  try {\n    this.batch.clear()\n  } catch (err) {\n    throw new WriteError(err)\n  }\n\n  this.ops = []\n  return this\n}\n\nBatch.prototype.write = function (callback) {\n  var levelup = this._levelup\n    , ops     = this.ops\n\n  try {\n    this.batch.write(function (err) {\n      if (err)\n        return dispatchError(levelup, new WriteError(err), callback)\n      levelup.emit('batch', ops)\n      if (callback)\n        callback()\n    })\n  } catch (err) {\n    throw new WriteError(err)\n  }\n}\n\nmodule.exports = Batch\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;;AAEA,IAAIA,IAAI,GAAYC,OAAO,CAAC,QAAQ,CAAC;EACjCC,UAAU,GAAMD,OAAO,CAAC,UAAU,CAAC,CAACC,UAAU;EAE9CC,UAAU,GAAMH,IAAI,CAACG,UAAU;EAC/BC,aAAa,GAAGJ,IAAI,CAACI,aAAa;AAEtC,SAASC,KAAKA,CAAEC,OAAO,EAAE;EACvB,IAAI,CAACC,QAAQ,GAAGD,OAAO;EACvB,IAAI,CAACE,KAAK,GAAGF,OAAO,CAACG,EAAE,CAACD,KAAK,CAAC,CAAC;EAC/B,IAAI,CAACE,GAAG,GAAG,EAAE;AACf;AAEAL,KAAK,CAACM,SAAS,CAACC,GAAG,GAAG,UAAUC,IAAI,EAAEC,MAAM,EAAEC,OAAO,EAAE;EACrDA,OAAO,GAAGZ,UAAU,CAAC,IAAI,CAACI,QAAQ,EAAEQ,OAAO,CAAC;EAE5C,IAAIC,GAAG,GAAKhB,IAAI,CAACiB,SAAS,CAACJ,IAAI,EAAEE,OAAO,CAAC;IACrCG,KAAK,GAAGlB,IAAI,CAACmB,WAAW,CAACL,MAAM,EAAEC,OAAO,CAAC;EAE7C,IAAI;IACF,IAAI,CAACP,KAAK,CAACI,GAAG,CAACI,GAAG,EAAEE,KAAK,CAAC;EAC5B,CAAC,CAAC,OAAOE,CAAC,EAAE;IACV,MAAM,IAAIlB,UAAU,CAACkB,CAAC,CAAC;EACzB;EACA,IAAI,CAACV,GAAG,CAACW,IAAI,CAAC;IAAEC,IAAI,EAAG,KAAK;IAAEN,GAAG,EAAGA,GAAG;IAAEE,KAAK,EAAGA;EAAM,CAAC,CAAC;EAEzD,OAAO,IAAI;AACb,CAAC;AAEDb,KAAK,CAACM,SAAS,CAACY,GAAG,GAAG,UAAUV,IAAI,EAAEE,OAAO,EAAE;EAC7CA,OAAO,GAAGZ,UAAU,CAAC,IAAI,CAACI,QAAQ,EAAEQ,OAAO,CAAC;EAE5C,IAAIC,GAAG,GAAGhB,IAAI,CAACiB,SAAS,CAACJ,IAAI,EAAEE,OAAO,CAAC;EAEvC,IAAI;IACF,IAAI,CAACP,KAAK,CAACe,GAAG,CAACP,GAAG,CAAC;EACrB,CAAC,CAAC,OAAOQ,GAAG,EAAE;IACZ,MAAM,IAAItB,UAAU,CAACsB,GAAG,CAAC;EAC3B;EACA,IAAI,CAACd,GAAG,CAACW,IAAI,CAAC;IAAEC,IAAI,EAAG,KAAK;IAAEN,GAAG,EAAGA;EAAI,CAAC,CAAC;EAE1C,OAAO,IAAI;AACb,CAAC;AAEDX,KAAK,CAACM,SAAS,CAACc,KAAK,GAAG,YAAY;EAClC,IAAI;IACF,IAAI,CAACjB,KAAK,CAACiB,KAAK,CAAC,CAAC;EACpB,CAAC,CAAC,OAAOD,GAAG,EAAE;IACZ,MAAM,IAAItB,UAAU,CAACsB,GAAG,CAAC;EAC3B;EAEA,IAAI,CAACd,GAAG,GAAG,EAAE;EACb,OAAO,IAAI;AACb,CAAC;AAEDL,KAAK,CAACM,SAAS,CAACe,KAAK,GAAG,UAAUC,QAAQ,EAAE;EAC1C,IAAIrB,OAAO,GAAG,IAAI,CAACC,QAAQ;IACvBG,GAAG,GAAO,IAAI,CAACA,GAAG;EAEtB,IAAI;IACF,IAAI,CAACF,KAAK,CAACkB,KAAK,CAAC,UAAUF,GAAG,EAAE;MAC9B,IAAIA,GAAG,EACL,OAAOpB,aAAa,CAACE,OAAO,EAAE,IAAIJ,UAAU,CAACsB,GAAG,CAAC,EAAEG,QAAQ,CAAC;MAC9DrB,OAAO,CAACsB,IAAI,CAAC,OAAO,EAAElB,GAAG,CAAC;MAC1B,IAAIiB,QAAQ,EACVA,QAAQ,CAAC,CAAC;IACd,CAAC,CAAC;EACJ,CAAC,CAAC,OAAOH,GAAG,EAAE;IACZ,MAAM,IAAItB,UAAU,CAACsB,GAAG,CAAC;EAC3B;AACF,CAAC;AAEDK,MAAM,CAACC,OAAO,GAAGzB,KAAK"},"metadata":{},"sourceType":"script","externalDependencies":[]}